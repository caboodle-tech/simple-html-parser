/**
 * simple-html-parser v2.0.0 Copyright (c) 2025 Caboodle Tech
 * License and source: https://github.com/caboodle-tech/simple-html-parser
 */
const t=/:not\(([^)]+)\)/g,e=/\[([^\]]+)\]/g,s=/\.([a-zA-Z0-9\-_]+)/g,n=/#([a-zA-Z0-9\-_]+)/,i=/([a-zA-Z0-9\-_]+)?(\#[a-zA-Z0-9\-_]+)?(\.[a-zA-Z0-9\-_]+)*(\[[^\]]+\])*/g,r=/^[a-zA-Z0-9\-_]+/,o=/^["'](.*)["']$/,c=/\s+/,l=["img","br","hr","input","meta","link","area","base","col","embed","param","source","track","wbr"];class h{attributes={};children=[];content="";name="";parent=null;type="";constructor(t,e="",s={},n=null){this.type=t,this.name=e,this.attributes=s,this.parent=n}[Symbol.iterator](){let t="root"===this.type&&this.children.length>0?this.children[0]:this,e=!1,s=!1,n=!1;const i=t=>{if(!t||"root"===t.type&&null===t.parent)return null;if(t.parent){const e=t.parent.children,s=e.indexOf(t);if(s<e.length-1)return e[s+1]}return i(t.parent)},r=h.prototype.remove;return h.prototype.remove=function(){return this===t&&(n=!0),r.call(this)},{next(){if(!t)return h.prototype.remove=r,{value:void 0,done:!0};if(!e)return e=!0,t.skipChildren=function(){s=!0},{value:t,done:!1};n=!1,s=!1;const o=(t=>{if(n)return t.parent?i(t.parent):null;if(!s&&t.children.length>0)return t.children[0];if("root"===t.type&&null===t.parent)return null;if(t.parent){const e=t.parent.children,s=e.indexOf(t);if(-1===s)return i(t.parent);if(s<e.length-1)return e[s+1]}return i(t.parent)})(t),c=t;return t=o,t?t.skipChildren=function(){s=!0}:h.prototype.remove=r,{value:c,done:!1}}}}appendChild(...t){for(const e of t)e.parent=this,this.children.push(e);return t}createNode(t,e="",s={},n=null){return new h(t,e,s,n)}#t(t,e=0){const s="    ".repeat(e);let n="";for(const i of t)if("comment"===i.type&&"css"===i.commentType)n+=`${s}/* ${i.content} */\n`;else if("css-rule"===i.type){if(n+=`${s}${i.cssSelector} {\n`,i.cssDeclarations)for(const[t,e]of Object.entries(i.cssDeclarations))n+=`${s}    ${t}: ${e};\n`;i.children&&i.children.length>0&&(n+=this.#t(i.children,e+1)),n+=`${s}}\n`}else"css-at-rule"===i.type?(n+=`${s}@${i.cssName}`,i.cssParams&&(n+=` ${i.cssParams}`),"import"===i.cssName||"charset"===i.cssName||"namespace"===i.cssName?n+=";\n":(n+=" {\n",i.children&&i.children.length>0&&(n+=this.#t(i.children,e+1)),n+=`${s}}\n`)):"css-root"===i.type&&(n+=this.#t(i.children,e));return n}#e(t){const l=[],h=t.match(i)?.filter(Boolean)?.join("")||"",p=h.match(r),a=h.match(n),u=h.match(s),f=h.match(e),d=p?p[0]:null,g=a?a[1]:null,m=u?u.map(t=>t.substring(1)):[],y=[];if(f)for(const t of f){const e=t.slice(1,-1);if(e.includes("=")){const[t,s]=e.split("="),n=s.replace(o,"$1");y.push({name:t,value:n,hasValue:!0})}else y.push({name:e,hasValue:!1})}if(t.includes(" ")){const e=t.split(c),s=this.#e(e[0]);for(const t of s){const s=e.slice(1).join(" "),n=t.#e(s);for(const t of n)l.includes(t)||l.push(t)}return l}const b=[this];for(;b.length>0;){const t=b.shift();if("tag-open"===t.type){let e=!0;if(d&&t.name!==d&&(e=!1),g&&t.getAttribute("id")!==g&&(e=!1),m.length>0){const s=(t.getAttribute("class")||"").split(c);for(const t of m)if(!s.includes(t)){e=!1;break}}if(y.length>0)for(const s of y){const n=t.getAttribute(s.name);if(s.hasValue){if(n!==s.value){e=!1;break}}else if(void 0===n){e=!1;break}}e&&l.push(t)}b.push(...t.children)}return l}#s(t){if(!t.parent)return{opening:t,closing:null,whitespace:null,removedCount:0,startIndex:-1};const e=t.parent,s=e.children.indexOf(t);if(-1===s)return{opening:t,closing:null,whitespace:null,removedCount:0,startIndex:-1};let n=null,i=null,r=1,o=s;if(s>0){const t=e.children[s-1];"text"===t.type&&""===t.content.trim()&&(i=t,o=s-1,r+=1)}return"tag-open"===t.type&&(n=this.#n(t),n&&(r+=1)),e.children.splice(o,r),t.parent=null,n&&(n.parent=null),i&&(i.parent=null),{opening:t,closing:n,whitespace:i,removedCount:r,startIndex:o}}findAllByAttr(t){const e=[],s=[this];for(;s.length>0;){const n=s.shift();"tag-open"===n.type&&Object.prototype.hasOwnProperty.call(n.attributes,t)&&e.push(n),s.push(...n.children)}return e}findAllByTag(t){const e=[],s=[this];for(;s.length>0;){const n=s.shift();"tag-open"===n.type&&n.name===t&&e.push(n),s.push(...n.children)}return e}findAllByType(t){const e=[],s=[this];for(;s.length>0;){const n=s.shift();(n.type===t||"script-block"===t&&"tag-open"===n.type&&n.scriptBlock)&&e.push(n),s.push(...n.children)}return e}#n(t){if(!t.parent||"tag-open"!==t.type)return null;const e=t.parent.children.indexOf(t);if(-1===e)return null;const s=t.parent.children[e+1];return s&&"tag-close"===s.type&&s.name===t.name?s:null}#i(e){const s=[],n=[],i=e.replace(t,(t,e)=>(n.push(e.trim()),"")).trim();let r=[];if(""===i){const t=[this];for(;t.length>0;){const e=t.shift();"tag-open"===e.type&&r.push(e),t.push(...e.children)}}else r=this.#e(i);for(const t of r){let e=!0;for(const s of n){if(this.#r().#e(s).includes(t)){e=!1;break}}e&&s.push(t)}return s}#r(){let t=this;for(;null!==t.parent;)t=t.parent;return t}#o(t){const e=[],s=t=>{for(const n of t.children)e.push(n),s(n)};return s(t),e}getAttribute(t){return this.attributes[t]}getComments(t={}){const{includeContent:e=!0,includeType:s=!0}=t,n=[],i=t=>{if("comment"===t.type)if(e||s){const i={};e&&(i.content=t.content),s&&t.commentType&&(i.commentType=t.commentType),i.node=t,n.push(i)}else n.push(t);if(t.children&&Array.isArray(t.children))for(const e of t.children)i(e)};return i(this),n}#c(t){let e="";for(const[s,n]of Object.entries(t.attributes))e+="__EMPVAL__"!==n?` ${s}="${n}"`:` ${s}`;return e}getNodesByType(t){const e=[],s=n=>{if(n.type===t&&e.push(n),n.children&&Array.isArray(n.children))for(const t of n.children)s(t)};return s(this),e}getTag(){if("text"===this.type)return this.content;if("comment"===this.type){const t=this.commentType||"html-comment";return"js-single-line"===t?`//${this.content}`:"js-multi-line"===t?`/*${this.content}*/`:`\x3c!--${this.content}--\x3e`}if("tag-open"===this.type||"tag-close"===this.type){const t=this.#c(this);return`<${this.name}${t}>`}return""}innerHtml(t=!1){let e="";for(const s of this.children)e+=s.toHtml(t);return e}insertAfter(...t){if(!this.parent)throw new Error("Cannot insert after a node with no parent");let e=this;if("tag-open"===this.type&&!this.#l(this)){const t=this.#n(this);t&&(e=t)}let s=e.parent.children.indexOf(e);if(-1===s)throw new Error("Node not found in parent's children");s+=1;for(const n of t){let t=null,i=null;if(n.parent){const r=n.parent===e.parent,o=this.#s(n);t=o.closing,i=o.whitespace,r&&-1!==o.startIndex&&o.startIndex<s&&(s-=o.removedCount)}i&&(i.parent=e.parent,e.parent.children.splice(s,0,i),s+=1),n.parent=e.parent,e.parent.children.splice(s,0,n),s+=1,t&&(t.parent=e.parent,e.parent.children.splice(s,0,t),s+=1)}return this}insertBefore(...t){if(!this.parent)throw new Error("Cannot insert before a node with no parent");let e=this;if("tag-close"===this.type){const t=this.parent.children.indexOf(this);if(-1===t)throw new Error("Node not found in parent's children");const s=this.parent.children[t-1];s&&"tag-open"===s.type&&s.name===this.name&&(e=s)}let s=e.parent.children.indexOf(e);if(-1===s)throw new Error("Node not found in parent's children");for(const n of t){let t=null,i=null;if(n.parent){const r=n.parent===e.parent,o=this.#s(n);t=o.closing,i=o.whitespace,r&&-1!==o.startIndex&&o.startIndex<s&&(s-=o.removedCount)}i&&(i.parent=e.parent,e.parent.children.splice(s,0,i),s+=1),n.parent=e.parent,e.parent.children.splice(s,0,n),s+=1,t&&(t.parent=e.parent,e.parent.children.splice(s,0,t),s+=1)}return this}#l(t){return"tag-open"===t.type&&l.includes(t.name)}outerHtml(t=!1){return this.toHtml(t)}querySelector(t){const e=this.querySelectorAll(t);return e.length>0?e[0]:null}querySelectorAll(t){if(t.includes(",")){const e=t.split(",").map(t=>t.trim()),s=[];for(const t of e){const e=this.#i(t);for(const t of e)s.includes(t)||s.push(t)}return s}return this.#i(t)}remove(){if(this.parent){const t=this.parent.children.indexOf(this);if(-1!==t){if("tag-open"===this.type&&t+1<this.parent.children.length){const e=this.parent.children[t+1];if("tag-close"===e.type&&e.name===this.name)return this.parent.children.splice(t,2),this.parent=null,this}if("tag-close"===this.type&&t>0){const e=this.parent.children[t-1];if("tag-open"===e.type&&e.name===this.name)return this.parent.children.splice(t-1,2),this.parent=null,this}this.parent.children.splice(t,1),this.parent=null}}return this}removeAttribute(t){delete this.attributes[t]}replaceWith(...t){if(!this.parent)throw new Error("Cannot replace a node with no parent");const e=this.parent.children.indexOf(this);if(-1===e)throw new Error("Node not found in parent's children");const{parent:s}=this,n=[this];let i=1;if("tag-open"===this.type){const t=this.#n(this);t&&(n.push(t),i=2);const e=this.#o(this);n.push(...e)}const r=[];for(const e of t)if(e.parent){const t=this.#s(e);r.push(t)}else r.push({opening:e,closing:null,whitespace:null,removedCount:0});s.children.splice(e,i);let o=e;for(const t of r)t.whitespace&&(t.whitespace.parent=s,s.children.splice(o,0,t.whitespace),o+=1),t.opening.parent=s,s.children.splice(o,0,t.opening),o+=1,t.closing&&(t.closing.parent=s,s.children.splice(o,0,t.closing),o+=1);for(const t of n)t.parent=null;return this}setAttribute(t,e){this.attributes[t]=e}toHtml(t=!1){if("text"===this.type)return this.content;if("comment"===this.type){if(!t)return"";const e=this.commentType||"html-comment";return"js-single-line"===e?`//${this.content}`:"js-multi-line"===e?`/*${this.content}*/`:`\x3c!--${this.content}--\x3e`}if("tag-open"===this.type){const e=this.#c(this);let s=`<${this.name}${e}>`;if(this.styleBlock&&this.children.length>0)s+=`\n${this.#t(this.children,0)}`;else for(const e of this.children)s+=e.toHtml(t);return s}if("tag-close"===this.type)return`</${this.name}>`;let e="";for(const s of this.children)e+=s.toHtml(t);return e}toString(){return this.toHtml(!0)}updateAttribute(t,e,s=" "){if(!(t in this.attributes))return void(this.attributes[t]=e);const n=this.attributes[t];n.split(s).includes(e)||(this.attributes[t]=`${n}${s}${e}`)}visualize(t={}){const e={contentPreviewLength:20,returnString:!1,showAttributes:!0,showContent:!0,showNodeNumber:!1,showNodeType:!1,...t},{contentPreviewLength:s,returnString:n,showAttributes:i,showContent:r,showNodeNumber:o,showNodeType:c}=e;let l="",h=0;const p=t=>{if(!t||!r)return"";const e=t.trim();return e.length?e.length>s?`: "${e.substring(0,s-3)}..."`:`: "${e}"`:""},a=t=>i&&0!==Object.keys(t).length?` ${Object.entries(t).map(([t,e])=>"__EMPVAL__"===e?t:`${t}="${e}"`).join(" ")}`:"";let u="";if("root"===this.type)u="ROOT";else if("text"===this.type)u=`TEXT${p(this.content)}`;else if("comment"===this.type){u=`COMMENT${this.commentType?` (${this.commentType})`:""}${p(this.content)}`}else if("tag-open"===this.type){const t=a(this.attributes);u=`<${this.name}${t}>`}else"tag-close"===this.type&&(u=`</${this.name}>`);c&&(u+=` (${this.type}`,this.scriptBlock&&(u+=", script-block"),u+=")"),o&&(u+=` [${h}]`,h+=1),l+=`${u}\n`;const{children:f}=this;for(let t=0;t<f.length;t++){const e=t===f.length-1,s=e?"└── ":"├── ";d(f[t],s,e,[])}function d(t,e,s,n){let i="";if("text"===t.type)i=`TEXT${p(t.content)}`;else if("comment"===t.type){i=`COMMENT${t.commentType?` (${t.commentType})`:""}${p(t.content)}`}else if("tag-open"===t.type){const e=a(t.attributes);i=`<${t.name}${e}>`}else"tag-close"===t.type&&(i=`</${t.name}>`);if(l+=`${n.join("")}${e}${i}`,c&&(l+=` (${t.type}`,t.scriptBlock&&(l+=", script-block"),l+=")"),o&&(l+=` [${h}]`,h+=1),l+="\n",t.children.length>0){const e=s?"    ":"│   ",i=[...n,e];for(let e=0;e<t.children.length;e++){const s=e===t.children.length-1,n=s?"└── ":"├── ";d(t.children[e],n,s,i)}}}if(n)return l;console.log(l)}cssFlattenRules(t,e={}){const{includeBraces:s=!0,includeSelector:n=!0,combineDeclarations:i=!0,expandNested:r=!1,singleLine:o=!1,indent:c=0}=e,l=Array.isArray(t)?t:[t],h={},p=[];let a="";const u=[];for(const t of l)if("css-rule"===t.type&&(a||(a=t.cssSelector),i?t.cssDeclarations&&Object.assign(h,t.cssDeclarations):p.push(t),r&&t.children))for(const e of t.children)"css-rule"===e.type&&u.push(e);if(!i&&p.length>0){let t="";for(const s of p)t+=this.cssFlattenRules(s,{...e,combineDeclarations:!0}),o||(t+="\n");return t.trimEnd()}const f=o?"":" ".repeat(c),d=o?" ":"\n";let g="";n&&s&&a&&(g+=`${f}${a}`),s&&(g+=n?` {${d}`:`{${d}`);const m=o?"":" ".repeat(s&&!o?c+4:c),y=Object.entries(h);for(let t=0;t<y.length;t++){const[e,s]=y[t],n=t===y.length-1;o?(g+=`${e}: ${s};`,n||(g+=" ")):g+=`${m}${e}: ${s};${d}`}if(s&&(g+=o?" }":`${f}}${d}`),r&&u.length>0)for(const t of u){const s=`${a} ${t.cssSelector}`,n={...t,cssSelector:s};g+=o?` ${this.cssFlattenRules(n,{...e,indent:c})}`:`\n${this.cssFlattenRules(n,{...e,indent:c})}`}return o?g:g.trimEnd()}cssGetAllSelectors(t={}){const{splitCommas:e=!0}=t,s=new Set,n=t=>{if("css-rule"===t.type&&t.cssSelector)if(e){t.cssSelector.split(",").map(t=>t.trim()).forEach(t=>s.add(t))}else s.add(t.cssSelector);if(t.children)for(const e of t.children)n(e)};return n(this),Array.from(s)}cssGetAtRules(t=null){const e=[],s=n=>{if("css-at-rule"===n.type&&(null!==t&&n.cssName!==t||e.push(n)),n.children)for(const t of n.children)s(t)};return s(this),e}cssGetRulesBySelector(t,e=!1){const s=[],n=i=>{if("css-rule"===i.type)if(e){i.cssSelector.split(",").map(t=>t.trim()).includes(t)&&s.push(i)}else i.cssSelector.includes(t)&&s.push(i);if(i.children)for(const t of i.children)n(t)};return n(this),s}cssGetStylesFor(t,e={}){const s=this.cssGetRulesBySelector(t,!1);return 0===s.length?"":this.cssFlattenRules(s,{combineDeclarations:!0,expandNested:!0,...e})}cssGetVariable(t,e=null){const s=t.startsWith("--")?t:`--${t}`;if(e)return e.cssDeclarations?.[s]||null;const n=t=>{if(t.cssDeclarations&&t.cssDeclarations[s])return t.cssDeclarations[s];if(t.children)for(const e of t.children){const t=n(e);if(t)return t}return null};return n(this)}cssGetVariables(t={}){const{includeRoot:e=!1}=t,s=[],n=(t,i="")=>{let r=i;if("css-rule"===t.type)r=i?`${i} > ${t.cssSelector}`:t.cssSelector;else if("css-at-rule"===t.type){const e=`@${t.cssName}${t.cssParams?` ${t.cssParams}`:""}`;r=i?`${i} > ${e}`:e}if(t.cssDeclarations)for(const[n,i]of Object.entries(t.cssDeclarations))if(n.startsWith("--")){let o=r;!e&&t.parent&&"css-root"===t.parent.type&&(o=":root"===t.cssSelector?":root":t.cssSelector),s.push({name:n,value:i,scope:o,rule:t})}if(t.children)for(const e of t.children)n(e,r)};return n(this),s}}const p={atRuleName:/[a-zA-Z\-]/,whitespace:/\s/};class a{#h="";#p=0;#a=0;constructor(){}parse(t){this.#h=t,this.#a=0,this.#p=t.length;const e=new h("css-root");for(;this.#a<this.#p&&(this.#u(),!(this.#a>=this.#p));){if("/"===this.#f()&&"*"===this.#f(1)){const t=this.#d();t&&e.appendChild(t);continue}if("@"===this.#f()){const t=this.#g(e);t&&e.appendChild(t);continue}const t=this.#m(e);t&&e.appendChild(t)}return e}version(){return"CSS Parser v1.0.0"}#y(){let t=this.#a,e=0,s=!1,n=!1;for(;t<this.#p;){const i=this.#h[t];if("("===i)e+=1;else if(")"===i)e-=1;else if(0===e){if(":"===i&&":"!==this.#h[t+1]){s=!0;break}if("{"===i){n=!0;break}if(";"===i||"}"===i)break}t+=1}return n&&!s}#g(t){if("@"!==this.#f())return null;this.#a+=1;const e=this.#a;for(;this.#a<this.#p&&p.atRuleName.test(this.#h[this.#a]);)this.#a+=1;const s=this.#h.substring(e,this.#a);this.#u();const n=new h("css-at-rule",s,{},t);if(n.cssName=s,"import"===s||"charset"===s||"namespace"===s){const t=this.#a;for(;this.#a<this.#p&&";"!==this.#f();)this.#a+=1;return n.cssParams=this.#h.substring(t,this.#a).trim(),";"===this.#f()&&(this.#a+=1),n}const i=this.#a;let r=0,o=!0;for(;this.#a<this.#p&&o;){const t=this.#f();if("("===t)r+=1;else if(")"===t)r-=1;else if("{"===t&&0===r){o=!1;break}this.#a+=1}return n.cssParams=this.#h.substring(i,this.#a).trim(),this.#u(),"{"===this.#f()&&(this.#a+=1,this.#b(n)),n}#b(t){for(;this.#a<this.#p&&(this.#u(),!(this.#a>=this.#p));){const e=this.#f();if("}"===e){this.#a+=1;break}if("/"===e&&"*"===this.#f(1)){const e=this.#d();e&&t.appendChild(e);continue}if("@"===e){const e=this.#g(t);e&&t.appendChild(e);continue}if(this.#y()){const e=this.#m(t);e&&t.appendChild(e)}else this.#$(t)}}#d(){if("/"!==this.#f()||"*"!==this.#f(1))return null;this.#a+=2;const t=this.#a;let e=this.#h.indexOf("*/",this.#a);-1===e?(e=this.#p,this.#a=this.#p):this.#a=e+2;const s=new h("comment");return s.content=this.#h.substring(t,e),s.commentType="css",s}#$(t){const e=this.#a;for(;this.#a<this.#p&&":"!==this.#f()&&"}"!==this.#f();)this.#a+=1;const s=this.#h.substring(e,this.#a).trim();if(":"!==this.#f()){for(;this.#a<this.#p&&";"!==this.#f()&&"}"!==this.#f();)this.#a+=1;return void(";"===this.#f()&&(this.#a+=1))}this.#a+=1,this.#u();const n=this.#a;let i=0;for(;this.#a<this.#p;){const t=this.#f();if("("===t)i+=1;else if(")"===t)i-=1;else if(0===i&&(";"===t||"}"===t))break;this.#a+=1}const r=this.#h.substring(n,this.#a).trim();t.cssDeclarations||(t.cssDeclarations={}),s&&r&&(t.cssDeclarations[s]=r),";"===this.#f()&&(this.#a+=1)}#m(t){const e=this.#a;let s=0;for(;this.#a<this.#p;){const t=this.#f();if("("===t)s+=1;else if(")"===t)s-=1;else if("{"===t&&0===s)break;this.#a+=1}const n=this.#h.substring(e,this.#a).trim();if(!n||"{"!==this.#f())return null;const i=new h("css-rule",n,{},t);return i.cssSelector=n,i.cssDeclarations={},this.#a+=1,this.#b(i),i}#f(t=0){const e=this.#a+t;return e<this.#p?this.#h[e]:""}#u(){for(;this.#a<this.#p&&p.whitespace.test(this.#h[this.#a]);)this.#a+=1}}const u={attributePattern:/([\w-]+)(?:=(?:"([^"]*)"|'([^']*)'|(\S+)))?/g,jsRegexContext:/[\(\[{,;=:&|!?]/,validTagName:/[a-zA-Z0-9_\-]/,whitespace:/\s+/},f=["img","br","hr","input","meta","link","area","base","col","embed","param","source","track","wbr"];class d{#w=[];constructor(t=["jhp","s_"]){this.#w=t}getSpecialTags(){return[...this.#w]}parse(t){const e=new h("root");let s=e,n=0;for(;n<t.length;){if("<"===t[n]&&"\x3c!--"===t.substring(n,n+4)){const e=t.indexOf("--\x3e",n);if(-1===e){n+=1;continue}const i=t.substring(n+4,e),r=new h("comment","",{},s);r.content=i,r.commentType="html-comment",s.appendChild(r),n=e+3;continue}if("<"===t[n]&&("<"===t[n+1]||" "===t[n+1]||"/"!==t[n+1]&&"!"!==t[n+1]&&!u.validTagName.test(t[n+1]))){const e=t.indexOf("<",n+1),i=-1===e?t.length:e,r=new h("text");r.content=t.substring(n,i),s.appendChild(r),n=i;continue}if("<"===t[n]&&"/"!==t[n+1]){const e=t.indexOf(">",n);if(-1===e){n+=1;continue}const i=t.substring(n+1,e),r=i.split(u.whitespace)[0],o={},c=u.attributePattern;let l;const p=i.substring(r.length);let d=0;for(;null!==(l=c.exec(p));){d+=1;const t=l[1],e=l[2]||l[3]||l[4]||"__EMPVAL__";o[t]=e}const g=new h("tag-open",r,o,s);if(s.appendChild(g),"style"===r){const i=`</${r}>`,o=t.indexOf(i,n);if(-1!==o){g.styleBlock=!0;const c=t.substring(e+1,o),l=(new a).parse(c);g.children=l.children,n=o+i.length;const p=new h("tag-close",r,{},s);p.styleBlock=!0,s.appendChild(p);continue}}if(this.#w.includes(r)&&0===d){g.scriptBlock=!0;const i=`</${r}>`,o=t.indexOf(i,e);if(-1!==o){const c=t.substring(e+1,o);let l=!1,p="",a=!1,f=!1,d="",m=-1,y=0;for(let t=0;t<c.length;t++){const e=c[t],s=t<c.length-1?c[t+1]:"",n=t>0?c[t-1]:"";if("\\"!==n)if(f||a||'"'!==e&&"'"!==e&&"`"!==e)if(f||l||"/"!==e||"*"===n||0!==t&&!u.jsRegexContext.test(c[t-1]))if(a&&"/"===e&&"\\"!==n)a=!1;else if(l||a||f){if(f)if("js-single-line"===d&&"\n"===e){const e=new h("comment","",{},g);e.content=c.substring(m,t),e.commentType=d,g.appendChild(e),f=!1,y=t+1}else if("js-multi-line"===d&&"*"===e&&"/"===s){const e=new h("comment","",{},g);e.content=c.substring(m,t),e.commentType=d,g.appendChild(e),f=!1,y=t+2,t+=1}}else{if("/"===e&&"/"===s){if(y<t){const e=new h("text");e.content=c.substring(y,t),g.appendChild(e)}f=!0,d="js-single-line",m=t+2,t+=1;continue}if("/"===e&&"*"===s){if(y<t){const e=new h("text");e.content=c.substring(y,t),g.appendChild(e)}f=!0,d="js-multi-line",m=t+2,t+=1;continue}}else a=!0;else l?e===p&&(l=!1):(l=!0,p=e)}if(f){const t=new h("comment","",{},g);t.content=c.substring(m),t.commentType=d,g.appendChild(t)}else if(y<c.length){const t=new h("text");t.content=c.substring(y),g.appendChild(t)}const b=new h("tag-close",r,{},s);b.scriptBlock=!0,s.appendChild(b),n=o+i.length;continue}}f.includes(r)||(s=g),n=e+1;continue}if("<"===t[n]&&"/"===t[n+1]){const e=t.indexOf(">",n);if(-1===e){n+=1;continue}const i=t.substring(n+2,e),r=new h("tag-close",i);let o=s,c=!1;for(;o&&"root"!==o.type;){if("tag-open"===o.type&&o.name===i){o.parent.appendChild(r),s=o.parent,c=!0;break}o=o.parent}c||s.appendChild(r),n=e+1;continue}const e=t.indexOf("<",n),i=-1===e?t.length:e;if(i>n){const e=t.substring(n,i),r=new h("text");r.content=e,s.appendChild(r)}n=i}return e}version(){return"Simple Html Parser v1.4.0"}}export{a as CSSParser,h as Node,d as SimpleHtmlParser,d as default};
